
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giáo lý</title>
    <link href="https://fonts.cdnfonts.com/css/leander" rel="stylesheet">
</head>
<body>
  <style>
    .var::before {
      content: attr(content)
    }
  </style>
  <style>
    body {
      padding: 0;
      margin: 0;
      background: url(https://jrsinclair.com/assets/book-bg.jpg) top left;
    }
    .quizz {
      min-height: 100vh;
      padding: 20px;
      /* font-family:  "Crimson Text", Georgia, Times, "Times New Roman", serif; */
      width: 500px;
      box-sizing: border-box;
      margin: 0px auto;
    }

    .header {
      text-align: center;
      color: #b95951;
      font-size: 1.8rem;
      line-height: 2.625rem;
      font-weight: bold;
      /* font-family: Leander, "leanderregular", Georgia, serif; */
    }

    .question-container::before {
      background: url(https://jrsinclair.com/assets/ornate-border.svg) center bottom no-repeat;
      background-size: contain;
      content: "";
      display: block;
      height: 1.6875rem;
      margin-top: 1.6875rem;
      width: 100%;
      transform: rotate(180deg);
      margin-bottom: 20px;
    }

    .question-container::after {
      background: url(https://jrsinclair.com/assets/ornate-border.svg) center bottom no-repeat;
      background-size: contain;
      content: "";
      display: block;
      height: 1.6875rem;
      margin-top: 1.6875rem;
      width: 100%;
    }

    @media only screen and (max-width: 600px) {
      .quizz {
        width: 100%;
        padding: 15px;
      }
    }

    .buttons {
      text-align: center;
      margin-bottom: 15px;
    }

    .buttons button {
      cursor: pointer;
      background: #FFF;
      border: 1px solid #b95951;
      color: #b95951;
      padding: 5px 7px;
      font-size: 16px;
      border-radius: 10px;
      font-weight: 600;
    }

    .buttons button:hover {
      background: #b95951;
      color: #FFF;
    }

    .question-container {
      font-size: 20px;
      margin-bottom: 20px;
    }
    
    .question-container .question .content {
      margin-top: 10px;
    }
    
    .question-container .lesson {
      font-weight: bold;
    }

    .question-container .answer {
      margin-top: 20px;
    }

    .question-container hr {
      background: url(https://jrsinclair.com/assets/hrule.svg) center center no-repeat;
      border: 0;
      display: block;
      height: 1.5rem;
    }

    select {
      width: 100%;
      margin: 10px 0px;
      padding: 5px 10px;
      border-radius: 10px;
    }

    #total {
      margin-top: 10px;
      display: flex;
    }

    #total > div {
      flex: 1;
      height: 0.5rem;
    }

    #total > div[passed] {
      background: #b95951;
    }

    [data-fill] {
      background: #000;
    }

    .submit [data-fill] {
      background: transparent;
    }

    .submit [data-right] {
      border: #b95951 1px solid;
    }

    .answer input[type="radio"] {
      height: 20px;
      margin-right: 10px;
    }

    .answer input[type="radio"]:after {
      cursor: pointer;
      width: 15px;
      height: 15px;
      border-radius: 15px;
      top: -2px;
      left: -1px;
      position: relative;
      background-color: #fff;
      content: '';
      display: inline-block;
      visibility: visible;
      border: 2px solid white;
    }

    .answer input[type="radio"]:checked:after {
      position: relative;
      background-color: #b95951;
      border: 2px solid #b95951;
    }

    .answer input[type="checkbox"]:after {
      cursor: pointer;
      width: 15px;
      height: 15px;
      top: -2px;
      left: -1px;
      position: relative;
      background-color: #fff;
      content: '';
      display: inline-block;
      visibility: visible;
      border: 2px solid white;
    }

    .answer input[type="checkbox"]:checked:after {
      background-color: #b95951;
    }

    .checkbox-container {
      margin-bottom: 20px;
      padding: 5px;
    }

    .answer input[type="checkbox"] {
      margin-right: 10px;
    }

    .radio-container {
      display: flex;
      margin-right: 20px;
      padding: 5px;
    }

    .radio-answer {
      /* display: flex; */
      margin-bottom: 10px;
      border-bottom: 1px solid #ccc;
    }
  </style>
  <div class="quizz">
    <div class="header">Bí tích hôn phối</div>
    <div>
      <select id="lesson_select">
        <option value="ALL">Tất cả</option>
        <option value="BAI_7">Bài 7: Tình yêu vợ chồng</option>
        <option value="BAI_8">Bài 8: Tính dục và hôn nhân</option>
        <option value="BAI_9">Bài 9: Hòa hợp vợ chồng: Sự khác biệt giữa nam và nữ</option>
      </select>
    </div>
    <div id="total">
    </div>
    <div class="question-container" id="quizz-game" style="display: none;">

    </div>
    
    <div class="question-container" id="question" style="display: none;">
    
    </div>
    <div class="buttons">
      <button id="next" type="button" style="display: none;">Câu tiếp theo</button>
      <button id="next-quizz" type="button" style="display: none;">Câu tiếp theo</button>
      <button id="hint" type="button" style="display: none;">Gợi ý</button>
      <button id="submit" type="button" style="display: none;">Đáp án</button>
    </div>
    <div class="buttons">
      <button id="random" type="button">Hỏi đáp</button>
      <button id="random-quizz" type="button">Trắc nghiệm</button>
    </div>
    <!-- <div class="buttons">
      <button id="random" type="button">Random</button>
      <button id="next" type="button" style="display: none;">Next</button>
      <button id="hint" type="button" style="display: none;">Hint</button>
    </div> -->
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const lessons = {
        BAI_8: 'Bài 8: Tính dục và hôn nhân',
        BAI_9: 'Bài 9: Hòa hợp vợ chồng: Sự khác biệt giữa nam và nữ',
        BAI_7: 'Bài 7: Tình yêu vợ chồng',
      }

      const questionsQuizzBase = [
        {
          lesson: lessons['BAI_8'],
          question: 'Giới tính ảnh hưởng trên toàn bộ con người, đặc biệt đối với đời sống <span data-fill="1">tình cảm</span>, khả năng yêu thương và <span data-fill="2">truyền sinh</span>.',
          type: 'fill_word',
          answer: '',
          quizz: [
            {
              id: '1',
              words: [
                {
                  text: 'thế gian',
                  correct: false
                },
                {
                  text: 'tình cảm',
                  correct: true
                },
                {
                  text: 'tu hành',
                  correct: false
                }
              ]
            },
            {
              id: '2',
              words: [
                {
                  text: 'cảm thông',
                  correct: false
                },
                {
                  text: 'truyền sinh',
                  correct: true
                },
                {
                  text: 'tu hành',
                  correct: false
                }
              ]
            }
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: '<div>Sự khiết tịnh trong đời sống hôn nhân là gì?</div><div>Sự khiết tịnh trong đời sống hôn nhân là biết làm chủ <span data-fill="1">giới tính</span>, nhờ đó vợ chồng ăn ở với nhau một cách <span data-fill="2">tiết độ</span></div>',
          type: 'fill_word',
          answer: '',
          quizz: [
            {
              id: '1',
              words: [
                {
                  text: 'giới tính',
                  correct: true
                },
                {
                  text: 'gia đình',
                  correct: false
                },
                {
                  text: 'cuộc đời',
                  correct: false
                }
              ]
            },
            {
              id: '2',
              words: [
                {
                  text: 'công bằng',
                  correct: false
                },
                {
                  text: 'phong phú',
                  correct: false
                },
                {
                  text: 'tiết độ',
                  correct: true
                }
              ]
            }
          ]
        },
        {
          lesson: lessons['BAI_7'],
          question: '<div><b>Khuôn mẫu của tình yêu vợ chồng là gì?</b></div><div>khuôn mẫu của tình yêu vợ chồng chính là sự kết hợp giữa Đức Kitô và <span data-fill="1">Hội Thánh</span></div>',
          type: 'fill_word',
          answer: '',
          quizz: [
            {
              id: '1',
              words: [
                {
                  text: 'Hội Thánh',
                  correct: true
                },
                {
                  text: 'con người',
                  correct: false
                },
                {
                  text: 'thiên thần',
                  correct: false
                }
              ]
            },
          ]
        },
        {
          lesson: lessons['BAI_7'],
          question: 'Tình yêu vợ chồng có những đặc tính nào?',
          type: 'multiple',
          answer: '',
          quizz: [
            {
              text: 'Tìm kiếm nước trời',
              correct: false
            },
            {
              text: 'Đón nhận con cái',
              correct: true
            },
            {
              text: 'Trao hiến trọn vẹn',
              correct: true
            },
            {
              text: 'Kết hợp nên một',
              correct: true
            },
            {
              text: 'Xây dựng lẻ công bình',
              correct: false
            },
            {
              text: 'Chung thủy suốt đời',
              correct: true
            }
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Vợ chồng cần nắm vững những nguyên tắc luân lý nào trong đời sống tình dục?',
          type: 'multiple',
          answer: '',
          quizz: [
            {
              text: 'Các hành vì tính dục được thực hiện trong khuôn khổ hôn nhân đều chính đáng và cao quý.',
              correct: true
            },
            {
              text: 'Đón nhận và sinh sản thật nhiều con dân Thiên Chúa',
              correct: false
            },
            {
              text: 'Luân lý Công giáo tôn trọng thân xác, những không quá đề cao hành vi tính dục.',
              correct: true
            },
            {
              text: 'Đời sống hôn nhân Công giáo phải là đời sống trọng sạch và tiết độ',
              correct: true
            }
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Những tội nào phạm đến đức tiết độ?',
          type: 'multiple',
          answer: '',
          quizz: [
            {
              text: 'Hôn nhân ngoài giá thú',
              correct: false
            },
            {
              text: 'Dâm ô',
              correct: true
            },
            {
              text: 'Thủ dâm',
              correct: true
            },
            {
              text: 'Tà dâm',
              correct: true
            },
            {
              text: 'Ngoại tình',
              correct: false
            },
            {
              text: 'Khiêu dâm',
              correct: true
            },
            {
              text: 'Mại dâm',
              correct: true
            },
            {
              text: 'Hiếp dâm',
              correct: true
            }
          ]
        },
        {
          lesson: lessons['BAI_9'],
          question: '<div><b>Về phương diện tổng quát, người nam và người nữ khác nhau thế nào?</b></div><div>Người nam và người nữ khác nhau không chỉ về <span data-fill="1">vóc dáng bên ngoài</span>, mà còn khác nhau về <span data-fill="2">tâm tính, nhận thức</span> và hành động</div>',
          type: 'fill_word',
          answer: '',
          quizz: [
            {
              id: '1',
              words: [
                {
                  text: 'suy nghĩ',
                  correct: false
                },
                {
                  text: 'vóc dáng bên ngoài',
                  correct: true
                },
                {
                  text: 'sinh lý',
                  correct: false
                }
              ]
            },
            {
              id: '2',
              words: [
                {
                  text: 'tâm tính, nhận thức',
                  correct: true
                },
                {
                  text: 'ăn nói, hành xử',
                  correct: false
                },
                {
                  text: 'cách thờ phụng, vai trò',
                  correct: false
                }
              ]
            },
          ]
        },
      ];

      const questionBase = [
        {
          lesson: lessons['BAI_8'],
          question: 'Tính dục là gì?',
          answer_type: 'line',
          explain: '',
          list: [
            'Tính dục là khuynh hướng tự nhiên Thiên Chúa đặt nơi con người để ',
            'tiếp xúc, gặp gỡ với người khác, ',
            'dù nam hay nữ, ',
            'hoặc để người nam và người nữ yêu thương nhau hướng tới ',
            'hôn nhân và gia đình.'
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Tính dục phục vụ cho tình yêu vợ chồng thế nào?',
          answer_type: 'line',
          explain: '',
          list: [
            'Các hành vi tính dục giúp đem lại ',
            'niềm hoan lạc cho đời sống vợ chồng ',
            'và làm cho họ gắn bó nên một với nhau một cách sâu xa. ',
            'Ngoài ra, còn giúp tình yêu vợ chồng mở ngỏ ',
            'cho sự sống và diễn tả sự phong phú của Thiên Chúa, ',
            'cũng như góp phần xây dựng ',
            'nền văn mình tình yêu'
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Vợ chồng cần nắm vững những nguyên tắc luân lý nào trong đời sống tình dục?',
          answer_type: 'list',
          explain: '',
          list: [
            'Một là các hành vì tính dục được thực hiện trong khuôn khổ hôn nhân đều chính đáng và cao quý.',
            'Hai là luân lý Công giáo tôn trọng thân xác, những không quá đề cao hành vi tính dục.',
            'Ba là đời sống hôn nhân Công giáo phải là đời sống trọng sạch và tiết độ.'
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Sự khiết tịnh trong đời sống hôn nhân là gì?',
          answer_type: 'line',
          explain: '',
          list: [
            'Sự khiết tịnh trong đời sống hôn nhân là ',
            'biết làm chủ giới tính, ',
            'nhờ đó vợ chồng ăn ở với nhau một cách ',
            'tiết độ'
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Những tội nào phạm đến đức tiết độ?',
          answer_type: 'line',
          explain: '',
          list: [
            'Những tội này là: ',
            'dâm ô, ',
            'thủ dâm, ',
            'tà dâm, ',
            'khiêu dâm, ',
            'mại dâm và ',
            'hiếp dâm'
          ]
        },
        {
          lesson: lessons['BAI_8'],
          question: 'Có những tội nào xúc phạm đến phẩm giá hôn nhân?',
          answer_type: 'line',
          explain: '',
          list: [
            'Những tội này là: ',
            'ngoại tình, ',
            'ly dị, ',
            'đa phu, ',
            'đa thê, ',
            'loạn luân, ',
            'đồng tính luyến ái ',
            'và tự do sống chung như vợ chồng'
          ]
        },
        {
          lesson: lessons['BAI_9'],
          question: 'Giới tính là gì?',
          answer_type: 'line',
          explain: '',
          list: [
            'Giới tính là tất cả những phân biệt người nam với người nữ.'
          ]
        },
        {
          lesson: lessons['BAI_9'],
          question: 'Giới tính ảnh hưởng thế nào trên con người?',
          answer_type: 'line',
          explain: '',
          list: [
            'Giới tỉnh ảnh hưởng trên toàn bộ con người, ',
            'đặc biệt đối với đời sống tình cảm, ',
            'khả năng yêu thương ',
            'và truyền sinh.'
          ]
        },
        {
          lesson: lessons['BAI_9'],
          question: 'Về phương diện tổng quát, người nam và người nữ khác nhau thế nào?',
          answer_type: 'line',
          explain: '',
          list: [
            'Người nam và người nữ khác nhau không chỉ về vóc dàng bên ngoài, ',
            'mà còn khác nhau về tâm tính, ',
            'các nhận thức ',
            'và hành động'
          ]
        },
        {
          lesson: lessons['BAI_9'],
          question: 'Về phương diện tâm lý, sự khác biệt giữa người nam và người nữ được diễn tả thế nào?',
          answer_type: 'list',
          explain: '',
          list: [
            'Một là được ưu tiên',
            'Hai là phân cách',
            'Ba là chi tiết',
            'Bốn là bất đồng cảm',
            'Năm là thính giác'
          ]
        },
        {
          lesson: lessons['BAI_7'],
          question: 'Tình yêu vợ chồng có những đặc tính nào?',
          answer_type: 'list',
          explain: '',
          list: [
            'Một là kết hợp nên một',
            'Hai là trao hiến trọn vẹn',
            'Ba là chung thủy suốt đời',
            'Bốn là đón nhận con cái'
          ]
        },
        {
          lesson: lessons['BAI_7'],
          question: 'Vợ chồng có những bổn phận nào?',
          answer_type: 'line',
          explain: '',
          list: [
            'Người nam được mời gọi là chu toàn bổn phận ',
            'làm chồng và ',
            'làm cha; ',
            'Người nữ được mời gọi là chu toàn bổn phận ',
            'làm vợ và ',
            'làm mẹ.',
          ]
        },
        {
          lesson: lessons['BAI_7'],
          question: 'Khuôn mẫu của tình yêu vợ chồng là gì?',
          answer_type: 'line',
          explain: '',
          list: [
            'khuôn mẫu của tình yêu vợ chồng chính là sự kết hợp giữa ',
            'Đức Kitô và Hội Thánh'
          ]
        }
      ];
        
      let questions = questionBase;
      let questionsQuizz = questionsQuizzBase;

      let totalPart = 0;
      let unlockParts = [];
      let readParts = [];
      let currentQuestion = -1;
    
      function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
    
      function random(question) {
        document.getElementById('question').innerHTML = '';
        const questionHTML = '<div class="question"><div class="lesson">' + question.lesson + '</div><div class="content">' + question.question + '</div><hr /></div>';
        const explainHTML = '<div style="display: none" id="explain"><hr />' + question.explain + '</div>';
        const tagItem = question.answer_type === 'line' ? 'span' : 'li';
        const itemList = [];
        question.list.forEach((item, index) => {
          itemList.push(`<${tagItem} style="background: #000" data-index="part-${index + 1}">${item}</${tagItem}>`)
        });
        totalPart = question.list.length;
        unlockParts = [];
        const answerHTML = '<div class="answer">' + itemList.join('') + '</div>';
        document.getElementById('question').innerHTML = questionHTML + answerHTML + explainHTML;
        document.getElementById('hint').style.display = 'inline';
        document.getElementById('next').style.display = 'inline';
        document.getElementById('next-quizz').style.display = 'none';
        document.getElementById('question').style.display = 'block';
        document.getElementById('submit').style.display = 'none';
      }

      function randomQuizz(question) {
        document.getElementById('quizz-game').innerHTML = '';
        const itemList = [];
        if(question.type === 'fill_word') {
          question.quizz.forEach(q => {
            const words = [];
            q.words.forEach((w, i) => {
              words.push(`<div class="radio-container" ${w.correct ? 'data-right' : ''}><input type="radio" id="word-${q.id}-${i}" name="word-${q.id}"><label for="word-${q.id}-${i}">${w.text}</label></div>`)
            });
            itemList.push('<div class="radio-answer">' + words.join('') + '</div>');
          });
        } else {
          question.quizz.forEach((q, i) => {
            const words = [];
            itemList.push(`<div class="checkbox-container" ${q.correct ? 'data-right' : ''}>` + `<input type="checkbox" id="cb-${i}" name="quizz-option"><label for="cb-${i}">${q.text}</label>` + '</div>');
          });
        }
        document.getElementById('submit').style.display = 'inline';
        document.getElementById('next-quizz').style.display = 'inline';
        document.getElementById('next').style.display = 'none';
        document.getElementById('quizz-game').style.display = 'block';
        document.getElementById('quizz-game').classList.remove('submit');
        const answerHTML = '<div class="answer">' + itemList.join('') + '</div>';
        document.getElementById('hint').style.display = 'none';
        const questionHTML = '<div class="question"><div class="lesson">' + question.lesson + '</div><div class="content">' + question.question + '</div><hr />' + answerHTML +'</div>';
        const explainHTML = '<div style="display: none" id="explain"><hr />' + question.explain + '</div>';
        document.getElementById('quizz-game').innerHTML = questionHTML + explainHTML;
      }
    
      function hint() {
        let index = -1;
        if(unlockParts.length !== totalPart) {
          while(true) {
            index = getRandomInt(1, totalPart);
            if(!unlockParts.includes(index)) {
              unlockParts.push(index);
              document.querySelector(`[data-index="part-${index}"]`).style.background = 'transparent';
              if(unlockParts.length === totalPart) {
                document.getElementById('explain').style.display = 'block';
                document.getElementById('hint').style.display = 'none';
              }
              return;
            }
          }
        }
      }
    
      function getRandomQuestion() {
        let index = -1;
        while(readParts.length !== questions.length) {
          index = getRandomInt(0, questions.length - 1);
          if(!readParts.includes(index)) {
            readParts.push(index);
            return index;
          }
        }
      }

      function getRandomQuizzQuestion() {
        let index = -1;
        while(readParts.length !== questionsQuizz.length) {
          index = getRandomInt(0, questionsQuizz.length - 1);
          if(!readParts.includes(index)) {
            readParts.push(index);
            return index;
          }
        }
      }

      function generatePass() {
        const passes = ['<div pass-item passed></div>'];
        for (let i = 0; i < questions.length - 1; i++) {
          passes.push('<div pass-item></div>');
        }
        document.getElementById('total').innerHTML = passes.join('');
      }

      function generatePassQuizz() {
        const passes = ['<div pass-item passed></div>'];
        for (let i = 0; i < questionsQuizz.length - 1; i++) {
          passes.push('<div pass-item></div>');
        }
        document.getElementById('total').innerHTML = passes.join('');
      }

      function updatePass() {
        let count = 0;
        document.querySelectorAll(`[pass-item]`).forEach(el => {
          if(count < readParts.length) {
            el.setAttribute('passed', true);
          }
          count++;
        });
      }

      function submit() {
        document.getElementById('quizz-game').classList.add('submit');
      }

      document.getElementById('random').addEventListener('click', (e) => {
        readParts = [];
        random(questions[getRandomQuestion()]);
        document.getElementById('next').style.display = 'inline';
        document.getElementById('quizz-game').style.display = 'none';
        generatePass();
      });

      document.getElementById('random-quizz').addEventListener('click', (e) => {
        readParts = [];
        randomQuizz(questionsQuizz[getRandomQuizzQuestion()]);
        document.getElementById('next-quizz').style.display = 'inline';
        document.getElementById('question').style.display = 'none';
        generatePassQuizz();
      });

      document.getElementById('next').addEventListener('click', (el) => {
        if(readParts.length !== questions.length) {
          if(readParts.length === questions.length - 1) {
            el.target.style.display = 'none'
          }
          random(questions[getRandomQuestion()]);
          updatePass();
        }
      });

      document.getElementById('next-quizz').addEventListener('click', (el) => {
        if(readParts.length !== questionsQuizz.length) {
          if(readParts.length === questionsQuizz.length - 1) {
            el.target.style.display = 'none'
          }
          randomQuizz(questionsQuizz[getRandomQuizzQuestion()]);
          updatePass();
        }
      });
    
      document.getElementById('hint').addEventListener('click', () => {
        hint();
      });

      document.getElementById('submit').addEventListener('click', () => {
        submit();
      });

      document.getElementById('lesson_select').addEventListener('change', (e) => {
        const valueSelected = e.target.value;
        if(valueSelected === 'ALL') {
          questions = questionBase;
          questionsQuizz = questionsQuizz
        } else {
          questions = questionBase.filter(q => q.lesson === lessons[valueSelected]);
          questionsQuizz = questionsQuizzBase.filter(q => q.lesson === lessons[valueSelected]);
        }

        totalPart = 0;
        unlockParts = [];
        currentQuestion = -1;
        document.getElementById('question').innerHTML = '';
        document.getElementById('question').style.display = 'none';
        document.getElementById('hint').style.display = 'none';
        document.getElementById('next').style.display = 'none';
        document.getElementById('total').innerHTML = '';

        document.getElementById('quizz-game').innerHTML = '';
        document.getElementById('quizz-game').style.display = 'none';
        document.getElementById('submit').style.display = 'none';
        document.getElementById('next-quizz').style.display = 'none';
      })
    });      
  
  </script>
</body>
</html>